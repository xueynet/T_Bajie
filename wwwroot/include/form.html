<!--发布需求开始-->
<div class="ui-popup-order-backdrop">
    <div class="ui-popup-order">
        <h1 class="section-left--title">
            发布需求<span class="section-right--title">让全球千万专业人才快速响应您的需求</span>
        </h1>
        <div class="section-form">
            <div class="section-form-item">
                <label class="section-form-item--label">
                    我需要<span class="section-form-item--red">*</span>
                </label>
                <div class="section-form-item--content">
                    <div class="section-form--input j-placeholder-wrapper" style="position: relative;">
                        <textarea class="form-textarea__inner" id="xy-form-textarea-name" placeholder="工程设计、效果图制作、规划设计、建筑设计、全域旅游、城市公共品牌、文创设计；乡村振兴"></textarea>
                    </div>
                    <p class="j-describe-error">
                        <span class="j-error-tip"></span>
                    </p>
                </div>
            </div>
            <div class="mobile-wrapper section-form-item">
                <label class="section-form-item--label">
                    手机号码<span class="section-form-item--red">*</span>
                </label>
                <div class="section-form-item--content section-form-item--content__new">
                    <div class="section-form--input eidt-mobile-wrapper">
                        <input class="form-input__inner" type="text" id="tel" name="modifyphone" placeholder="便于筛选合适人才后，接收告知信息">
                    </div>
                    <p class="j-verify-error mt5">
                        <span class="j-error-tip"></span>
                    </p>
                    <p class="J-login-tip hide">
                        点击“提交”即代表您已同意<a href="//rule.zbj.com/ruleshow-0?pid=2&categoryId=289" class="login-agreement" target="_blank">《猪八戒网服务协议》</a>
                    </p>
                </div>
            </div>
            <div class="section-form-green">信息保护中，仅官方可见</div>
            <div class="section-form-item section-form-item__submit">
                <label class="section-form-item--label">&nbsp;</label>
                <div class="section-form-item--content">
                    <button class="btn btn__main btn-submit J-submit" type="submit" data-linkid="10197006">免费发布需求</button>
                </div>
            </div>
        </div>
        <button i="close" class="ui-dialog-order-close popup-close" title="cancel">×</button>
    </div>
</div>
<script>
    $('.xy-form-btn').click(function() {
        $('.ui-popup-order-backdrop').show();
        $('.ui-popup-order').show();
    });
    $('.ui-dialog-order-close').click(function() {
        $('.ui-popup-order-backdrop').hide();
        $('.ui-popup-order').hide();
    });

    function initFormTextholder(str) {
        $('.form-textarea__inner').attr('placeholder', str);
    }
    $('.form-textarea__inner').bind('input propertychange', function() {
        var length = $(".form-textarea__inner").val().length;
        if (length < 3) {
            $(".j-describe-error").show();
            $(".j-describe-error .j-error-tip").text('填写内容不少于2个字')
        } else {
            $(".j-describe-error").hide();
        }
    });
    $('.form-input__inner').blur(function() {
        if (!/^1[3-9]\d{9}$/.test($(".form-input__inner").val())) {
            $(".j-verify-error").show();
            $(".j-verify-error .j-error-tip").text('填写正确的手机号')
        } else {
            $(".j-verify-error").hide();
        }
    })
    $(".btn-submit").on('click', function() {
        var tel = $.trim($(".form-input__inner").val());
        var content = $(".form-textarea__inner").val();

        var reg = /^1[3-9]\d{9}$/;
        var qq = '';
        var telephone = tel;
        var email = '';
        if (RegExp(reg).test(tel)) {
            var data = JSON.stringify({
                "Mobile": tel,
                "Content": content,
                "Source": document.title + " " + window.location.href
            })
            $.ajax({
                type: 'POST',
                url: "/api/form/1/1",
                data: data,
                contentType: "application/json",
                dataType: "json",
                success: function(result) {
                    if (result.id > 0) {
                        $('.section-form-green').text('发布成功！');
                        $(".form-input__inner").val('');
                        $(".form-textarea__inner").val('');
                        setTimeout(function() {
                            $('.ui-popup-order-backdrop').hide();
                            $('.ui-popup-order').hide();
                            $('.section-form-green').text('信息保护中，仅官方可见');

                        }, 1000);
                    } else {
                        console.log(result);
                    }
                }
            });
            // })
        } else {
            $(".j-verify-error .j-error-tip").text('填写正确的手机号')
        }
    });
</script>
<!--发布需求结束-->